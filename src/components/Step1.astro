<form data-step-content class='flex flex-col justify-evenly m-5'>
  <h1 class='text-5xl pt-10 text-marine-blue font-bold'>Personal info</h1>
  <p class='text-cool-gray'>
    Please provide your name, email address, and phone number.
  </p>

  <div class='flex flex-col'>
    <label class='text-marine-blue pb-2 inline-flex justify-between' for='name'>
      <span>Name</span>
      <span class='text-red-600' data-input-error='email'></span>
    </label>
    <input
      class='border p-2.5 rounded-md outline-none focus:border-purplish-blue'
      type='text'
      placeholder='e.g. Stephen King'
      name='name'
      id='name'
      required
    />
  </div>

  <div class='flex flex-col'>
    <label
      class='text-marine-blue pb-2 inline-flex justify-between'
      for='email'
    >
      <span>Email Address</span>
      <span class='text-red-600' data-input-error='email'></span>
    </label>
    <input
      class='border p-2.5 rounded-md outline-none focus:border-purplish-blue'
      type='email'
      placeholder='e.g. stephenking@lorem.com'
      name='email'
      id='email'
      required
    />
  </div>

  <div class='flex flex-col'>
    <label
      class='text-marine-blue pb-2 inline-flex justify-between'
      for='phone'
    >
      <span>Phone Number</span>
      <span class='text-red-600' data-input-error='phone'></span>
    </label>
    <input
      class='border p-2.5 rounded-md outline-none focus:border-purplish-blue'
      type='text'
      placeholder='e.g. +1 234 567 890'
      name='phone'
      id='phone'
      required
    />
  </div>

  <button
    type='button'
    class='bg-marine-blue self-end text-white px-6 py-3 rounded-md font-bold'
    data-step-next='step-1'
  >
    Next Step</button
  >
</form>

<script>
  import { nextStep } from "../script";

  const errorMessage = "This field is required";
  const nameInput = document.querySelector<HTMLInputElement>("#name")!;
  const emailInput = document.querySelector<HTMLInputElement>("#email")!;
  const phoneInput = document.querySelector<HTMLInputElement>("#phone")!;
  const nextButton = document.querySelector<HTMLButtonElement>(
    "[data-step-next='step-1']"
  )!;

  const inputs = [nameInput, emailInput, phoneInput];

  inputs.forEach((item) => {
    item.addEventListener("change", () => {
      const spanError =
        item.parentElement?.querySelector("[data-input-error]")!;
      spanError.innerHTML = "";
      item.classList.remove("border-red-600");
    });
  });

  nextButton.addEventListener("click", () => {
    let isError = false;

    inputs.forEach((item) => {
      if (item.value === "") {
        item.classList.add("border-red-600");
        const spanError =
          item.parentElement?.querySelector("[data-input-error]")!;
        spanError.innerHTML = errorMessage;
        isError = true;
      }
    });

    if (isError) return;

    nextStep();
  });
</script>
